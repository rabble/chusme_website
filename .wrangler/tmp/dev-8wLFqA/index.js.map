{
  "version": 3,
  "sources": ["../bundle-alrEtx/checked-fetch.js", "../../../src/invite-handler.ts", "../../../src/index.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-alrEtx/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-alrEtx/middleware-loader.entry.ts"],
  "sourceRoot": "/Users/rabble/code/verse/invite_gateway/.wrangler/tmp/dev-8wLFqA",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "// Enhanced invite handler with web invite and short URL support\n\nexport interface InviteData {\n  groupId: string;\n  relay: string;\n}\n\nexport interface ShortcodeMapping {\n  code: string;\n}\n\nexport interface WebInviteData extends InviteData {\n  name?: string;\n  description?: string;\n  avatar?: string;\n  createdAt: number;\n  creatorPubkey?: string;\n}\n\n// Generate a short alphanumeric code\nconst ALPHANUM = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nexport function generateCode(length = 8): string {\n  let result = '';\n  for (let i = 0; i < length; i++) {\n    result += ALPHANUM[Math.floor(Math.random() * ALPHANUM.length)];\n  }\n  return result;\n}\n\n// Generate a shorter code for short URLs (4 chars)\nexport function generateShortCode(): string {\n  return generateCode(4);\n}\n\n// Create a standard invite\nexport async function createInvite(\n  env: { INVITES: KVNamespace },\n  groupId: string,\n  relay: string\n): Promise<{ code: string; url: string }> {\n  const code = generateCode();\n  \n  const inviteData: InviteData = {\n    groupId,\n    relay\n  };\n  \n  await env.INVITES.put(code, JSON.stringify(inviteData));\n  \n  return {\n    code,\n    url: `https://rabble.community/i/${code}`\n  };\n}\n\n// Create a web invite with additional metadata\nexport async function createWebInvite(\n  env: { INVITES: KVNamespace },\n  groupId: string,\n  relay: string,\n  metadata: {\n    name?: string;\n    description?: string;\n    avatar?: string;\n    creatorPubkey?: string;\n  }\n): Promise<{ code: string; url: string }> {\n  const code = generateCode();\n  \n  const webInviteData: WebInviteData = {\n    groupId,\n    relay,\n    name: metadata.name,\n    description: metadata.description,\n    avatar: metadata.avatar,\n    creatorPubkey: metadata.creatorPubkey,\n    createdAt: Date.now()\n  };\n  \n  await env.INVITES.put(`web:${code}`, JSON.stringify(webInviteData));\n  \n  return {\n    code,\n    url: `https://rabble.community/join/${code}`\n  };\n}\n\n// Create a short URL invite\nexport async function createShortUrlInvite(\n  env: { INVITES: KVNamespace },\n  code: string\n): Promise<{ shortCode: string; url: string }> {\n  const shortCode = generateShortCode();\n  \n  const shortcodeMapping: ShortcodeMapping = {\n    code\n  };\n  \n  await env.INVITES.put(`short:${shortCode}`, JSON.stringify(shortcodeMapping));\n  \n  return {\n    shortCode,\n    url: `https://rabble.community/j/${shortCode}`\n  };\n}\n\n// Get invite data from a standard code\nexport async function getInvite(\n  env: { INVITES: KVNamespace },\n  code: string\n): Promise<InviteData | null> {\n  const data = await env.INVITES.get(code);\n  if (!data) return null;\n  \n  try {\n    return JSON.parse(data) as InviteData;\n  } catch (e) {\n    console.error('Failed to parse invite data', e);\n    return null;\n  }\n}\n\n// Get web invite data from a code\nexport async function getWebInvite(\n  env: { INVITES: KVNamespace },\n  code: string\n): Promise<WebInviteData | null> {\n  const data = await env.INVITES.get(`web:${code}`);\n  if (!data) return null;\n  \n  try {\n    return JSON.parse(data) as WebInviteData;\n  } catch (e) {\n    console.error('Failed to parse web invite data', e);\n    return null;\n  }\n}\n\n// Resolve a short code to the full invite code\nexport async function resolveShortCode(\n  env: { INVITES: KVNamespace },\n  shortCode: string\n): Promise<string | null> {\n  const data = await env.INVITES.get(`short:${shortCode}`);\n  if (!data) return null;\n  \n  try {\n    const mapping = JSON.parse(data) as ShortcodeMapping;\n    return mapping.code;\n  } catch (e) {\n    console.error('Failed to parse shortcode mapping', e);\n    return null;\n  }\n}\n\n// Create HTML for web invites with rich metadata\nexport function createWebInvitePage(invite: WebInviteData, code: string): string {\n  const groupName = invite.name || 'Community Group';\n  const groupDescription = invite.description || 'Join this Rabble community group';\n  const avatarUrl = invite.avatar || '';\n  \n  return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Join ${groupName} - Rabble Community</title>\n  <meta name=\"description\" content=\"${groupDescription}\">\n  <meta property=\"og:title\" content=\"Join ${groupName}\">\n  <meta property=\"og:description\" content=\"${groupDescription}\">\n  <meta property=\"og:type\" content=\"website\">\n  <meta property=\"og:site_name\" content=\"Rabble Community\">\n  ${avatarUrl ? `<meta property=\"og:image\" content=\"${avatarUrl}\">` : ''}\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n  <link href=\"https://fonts.googleapis.com/css2?family=Alegreya:wght@400;500;700;800&family=Crimson+Pro:wght@400;600;700&display=swap\" rel=\"stylesheet\">\n  <style>\n    :root {\n      --primary: #000000;\n      --secondary: #F5F1E9;\n      --accent: #5E452A;\n      --highlight: #FFFDF7;\n      --surface: #F9F6F0;\n      --surface-alt: #EDEAE0;\n      --text-primary: #000000;\n      --text-secondary: #3D3D3D;\n      --font-family: 'Alegreya', 'Crimson Pro', 'Georgia', serif;\n      --spacing: 8px;\n      --radius: 0px;\n      --shadow: none;\n    }\n    \n    * {\n      box-sizing: border-box;\n      margin: 0;\n      padding: 0;\n    }\n    \n    body {\n      font-family: var(--font-family);\n      color: var(--text-primary);\n      line-height: 1.6;\n      background-color: var(--surface);\n      background-image: url(\"data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%235e452a' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E\");\n      display: flex;\n      flex-direction: column;\n      min-height: 100vh;\n    }\n    \n    .header {\n      background-color: var(--primary);\n      color: white;\n      padding: 1rem 0;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    }\n    \n    .container {\n      max-width: 600px;\n      margin: 0 auto;\n      padding: 0 2rem;\n    }\n    \n    .logo {\n      font-size: 1.75rem;\n      font-weight: 800;\n      color: white;\n      text-decoration: none;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      display: flex;\n      align-items: center;\n    }\n    \n    .logo::before {\n      content: \"\u270A\";\n      display: inline-block;\n      font-size: 1.75rem;\n      margin-right: 0.75rem;\n    }\n    \n    .content {\n      padding: 3rem 0;\n      flex: 1;\n      display: flex;\n      align-items: center;\n    }\n    \n    .invite-card {\n      background-color: var(--surface);\n      padding: 2rem;\n      text-align: center;\n      width: 100%;\n      border: 3px solid var(--primary);\n    }\n    \n    .group-info {\n      margin: 2rem 0;\n    }\n    \n    .group-avatar {\n      width: 100px;\n      height: 100px;\n      background-color: var(--primary);\n      margin: 0 auto 1.5rem;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: white;\n      font-size: 2.5rem;\n      font-weight: 800;\n      background-size: cover;\n      background-position: center;\n      border: 3px solid var(--primary);\n    }\n    \n    .description {\n      max-width: 400px;\n      margin: 0 auto;\n      font-size: 1.125rem;\n      color: var(--text-secondary);\n      line-height: 1.7;\n    }\n    \n    h1 {\n      font-size: 2rem;\n      margin-bottom: 1rem;\n      font-weight: 800;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      line-height: 1.3;\n    }\n    \n    p {\n      margin-bottom: 1.5rem;\n      color: var(--text-secondary);\n      font-size: 1.125rem;\n    }\n    \n    .button-primary {\n      display: inline-block;\n      background-color: var(--primary);\n      color: white;\n      text-decoration: none;\n      padding: 0.75rem 1.5rem;\n      border: 2px solid var(--primary);\n      font-weight: 700;\n      font-size: 1.125rem;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      margin-bottom: 1rem;\n      width: 100%;\n      transition: background-color 0.2s;\n    }\n    \n    .button-primary:hover {\n      background-color: transparent;\n      color: var(--primary);\n    }\n    \n    .button-secondary {\n      display: inline-block;\n      background-color: transparent;\n      color: var(--primary);\n      text-decoration: none;\n      padding: 0.75rem 1.5rem;\n      border: 2px solid var(--primary);\n      font-weight: 700;\n      font-size: 1.125rem;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      margin-bottom: 1rem;\n      width: 100%;\n      transition: background-color 0.2s;\n    }\n    \n    .button-secondary:hover {\n      background-color: var(--primary);\n      color: white;\n    }\n    \n    .footer {\n      background-color: var(--primary);\n      color: white;\n      padding: 2rem 0;\n      font-size: 1rem;\n      text-align: center;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    }\n    \n    .footer a {\n      color: white;\n      text-decoration: none;\n      border-bottom: 1px solid rgba(255,255,255,0.3);\n      transition: border-color 0.2s;\n    }\n    \n    .footer a:hover {\n      border-bottom: 1px solid rgba(255,255,255,1);\n    }\n    \n    /* Woodcut style decorative divider */\n    .woodcut-divider {\n      height: 20px;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='40' height='12' viewBox='0 0 40 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 6 L40 6 M3 3 L3 9 M8 2 L8 10 M13 1 L13 11 M18 2 L18 10 M23 3 L23 9 M28 2 L28 10 M33 1 L33 11 M38 3 L38 9' stroke='%23000' stroke-width='1.5'/%3E%3C/svg%3E\");\n      background-repeat: repeat-x;\n      margin: 1.5rem 0;\n    }\n    \n    small {\n      display: block;\n      margin-top: 1rem;\n      color: var(--text-secondary);\n    }\n    \n    @media (max-width: 768px) {\n      .container {\n        padding: 0 1rem;\n      }\n    }\n  </style>\n</head>\n<body>\n  <header class=\"header\">\n    <div class=\"container\">\n      <a href=\"/\" class=\"logo\">Rabble</a>\n    </div>\n  </header>\n  \n  <main class=\"content\">\n    <div class=\"container\">\n      <div class=\"invite-card\">\n        <div class=\"group-info\">\n          ${avatarUrl \n            ? `<div class=\"group-avatar\" style=\"background-image: url('${avatarUrl}');\"></div>` \n            : `<div class=\"group-avatar\">${groupName.charAt(0)}</div>`}\n          <h1>${groupName}</h1>\n          ${invite.description ? `<p class=\"description\">${invite.description}</p>` : ''}\n        </div>\n        \n        <div class=\"woodcut-divider\"></div>\n        \n        <a href=\"plur://join-community?group-id=${invite.groupId}&code=${code}&relay=${encodeURIComponent(invite.relay)}\" class=\"button-primary\" id=\"open-app\">Open in Plur App</a>\n        <a href=\"https://play.google.com/store/apps/details?id=app.rabble.community\" class=\"button-secondary\" id=\"get-android\">Get on Android</a>\n        <a href=\"https://apps.apple.com/app/plur/id1234567890\" class=\"button-secondary\" id=\"get-ios\">Get on iOS</a>\n        <a href=\"/app?group-id=${invite.groupId}&code=${code}&relay=${encodeURIComponent(invite.relay)}\" class=\"button-secondary\" id=\"open-web\">Continue in Browser</a>\n        \n        <small>Created on ${new Date(invite.createdAt).toLocaleDateString()}</small>\n      </div>\n    </div>\n  </main>\n  \n  <footer class=\"footer\">\n    <div class=\"container\">\n      <p>&copy; 2025 rabble.community \u00B7 All rights reserved</p>\n    </div>\n  </footer>\n  \n  <script>\n    // Platform detection for showing appropriate buttons\n    const userAgent = navigator.userAgent || navigator.vendor || window.opera;\n    const isAndroid = /android/i.test(userAgent);\n    const isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;\n    \n    // Show/hide appropriate download buttons\n    document.getElementById('get-android').style.display = isAndroid ? 'inline-block' : 'none';\n    document.getElementById('get-ios').style.display = isIOS ? 'inline-block' : 'none';\n  </script>\n</body>\n</html>`;\n}", "/// <reference types=\"@cloudflare/workers-types\" />\nimport {\n  createInvite,\n  createWebInvite,\n  createWebInvitePage,\n  createShortUrlInvite,\n  getInvite,\n  getWebInvite,\n  resolveShortCode,\n  InviteData,\n  WebInviteData\n} from './invite-handler';\n\nexport interface Env {\n  INVITES: KVNamespace;\n  INVITE_TOKEN: string;\n}\n\ninterface PageMetadata {\n  title: string;\n  description: string;\n  image?: string;\n}\n\n// Simple markdown to HTML converter\nfunction markdownToHtml(markdown: string): { content: string, metadata: PageMetadata } {\n  const metadata: PageMetadata = {\n    title: \"Rabble Community\",\n    description: \"Private, ad-free spaces where you set the rules.\"\n  };\n\n  // Extract front matter\n  let content = markdown;\n  if (markdown.startsWith('---')) {\n    const endOfFrontMatter = markdown.indexOf('---', 3);\n    if (endOfFrontMatter !== -1) {\n      const frontMatter = markdown.substring(3, endOfFrontMatter).trim();\n      content = markdown.substring(endOfFrontMatter + 3).trim();\n      \n      // Parse front matter\n      const titleMatch = frontMatter.match(/title:\\s*\"([^\"]*)\"/);\n      if (titleMatch) metadata.title = titleMatch[1];\n      \n      const descMatch = frontMatter.match(/description:\\s*\"([^\"]*)\"/);\n      if (descMatch) metadata.description = descMatch[1];\n      \n      const imageMatch = frontMatter.match(/image:\\s*\"([^\"]*)\"/);\n      if (imageMatch) metadata.image = imageMatch[1];\n    }\n  }\n\n  // Convert markdown to HTML\n  // Headers\n  content = content.replace(/^### (.*$)/gm, '<h3>$1</h3>');\n  content = content.replace(/^## (.*$)/gm, '<h2>$1</h2>');\n  content = content.replace(/^# (.*$)/gm, '<h1>$1</h1>');\n  \n  // Emphasis\n  content = content.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>');\n  content = content.replace(/\\*(.*?)\\*/g, '<em>$1</em>');\n  \n  // Links\n  content = content.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)(?:{\\.([^}]+)})?/g, (match, text, url, className) => {\n    if (className) {\n      return `<a href=\"${url}\" class=\"${className}\">${text}</a>`;\n    }\n    return `<a href=\"${url}\">${text}</a>`;\n  });\n  \n  // Lists\n  content = content.replace(/^\\s*-\\s*(.*$)/gm, '<li>$1</li>');\n  content = content.replace(/(<li>.*<\\/li>\\n)+/g, function(match) {\n    return '<ul>' + match + '</ul>';\n  });\n  \n  // Tables\n  content = content.replace(/^\\|(.*)\\|$/gm, '<tr>$1</tr>');\n  content = content.replace(/<tr>(.*)<\\/tr>/g, (match, content) => {\n    const cells = content.split('|').map((cell: string) => cell.trim());\n    let row = '<tr>';\n    for (const cell of cells) {\n      if (cell) {\n        // Allow <br> tags in table cells\n        row += `<td>${cell}</td>`;\n      }\n    }\n    row += '</tr>';\n    return row;\n  });\n  content = content.replace(/(<tr>.*<\\/tr>\\n)+/g, function(match) {\n    return '<table>' + match + '</table>';\n  });\n  \n  // Code blocks\n  content = content.replace(/```([^`]*)\\n([^`]*)```/g, '<pre><code class=\"language-$1\">$2</code></pre>');\n  content = content.replace(/`([^`]*)`/g, '<code>$1</code>');\n  \n  // Sections\n  content = content.replace(/<section id=\"([^\"]+)\">(.*?)<\\/section>/gs, '<section id=\"$1\">$2</section>');\n  \n  // Details/summary\n  content = content.replace(/<details>\\s*<summary>(.*?)<\\/summary>(.*?)<\\/details>/gs, '<details><summary>$1</summary>$2</details>');\n  \n  // Quotes\n  content = content.replace(/:::(quote|info|warning)\\n([\\s\\S]*?):::/g, '<blockquote class=\"$1\">$2</blockquote>');\n  content = content.replace(/^>\\s*(.*$)/gm, '<blockquote>$1</blockquote>');\n  \n  // Horizontal rule\n  content = content.replace(/^---$/gm, '<hr>');\n  \n  // Paragraphs - handle after other conversions\n  content = content.replace(/^([^<].*[^>])$/gm, '<p>$1</p>');\n  \n  // Remove empty paragraphs\n  content = content.replace(/<p><\\/p>/g, '');\n  \n  return { content, metadata };\n}\n\nconst ALPHANUM = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nfunction generateCode(length = 8): string {\n  let result = '';\n  for (let i = 0; i < length; i++) {\n    result += ALPHANUM[Math.floor(Math.random() * ALPHANUM.length)];\n  }\n  return result;\n}\n\n// Static files for app-linking\nconst STATIC_FILES: Record<string, { content: string; contentType: string }> = {\n  '/.well-known/assetlinks.json': {\n    content: JSON.stringify([{\n      relation: ['delegate_permission/common.handle_all_urls'],\n      target: {\n        namespace: 'android_app',\n        package_name: 'app.rabble.community',\n        sha256_cert_fingerprints: ['YOUR_APP_FINGERPRINT_HERE']\n      }\n    }]),\n    contentType: 'application/json'\n  },\n  '/apple-app-site-association': {\n    content: JSON.stringify({\n      applinks: {\n        apps: [],\n        details: [{\n          appID: 'GZCZBKH7MY.app.rabble.community',\n          paths: [\n            '/i/*', \n            '/join/*', \n            '/join-community*',\n            '/g/*'\n          ],\n          appIDs: ['GZCZBKH7MY.app.rabble.community'],\n          components: [\n            {\n              \"/\": \"/i/*\",\n              comment: \"Matches any URL with a path that starts with /i/\"\n            },\n            {\n              \"/\": \"/join/*\",\n              comment: \"Matches any URL with a path that starts with /join/\"\n            },\n            {\n              \"/\": \"/join-community*\",\n              comment: \"Matches any URL with a path that starts with /join-community\"\n            },\n            {\n              \"/\": \"/g/*\",\n              comment: \"Matches any URL with a path that starts with /g/\"\n            }\n          ]\n        }]\n      },\n      webcredentials: {\n        apps: [\"GZCZBKH7MY.app.rabble.community\"]\n      }\n    }),\n    contentType: 'application/json'\n  }\n};\n\n// Design tokens and CSS variables\nconst DESIGN_TOKENS = {\n  colors: {\n    primary: \"#000000\",      // Black (main color for woodcut style)\n    secondary: \"#F5F1E9\",    // Off-white paper texture background\n    accent: \"#5E452A\",       // Wood brown accent\n    highlight: \"#FFFDF7\",    // Cream highlight\n    surface: \"#F9F6F0\",      // Natural paper surface\n    surfaceAlt: \"#EDEAE0\",   // Slightly darker paper background\n    textPrimary: \"#000000\",  // Black text\n    textSecondary: \"#3D3D3D\" // Dark gray text\n  },\n  typography: {\n    fontFamily: \"'Alegreya', 'Crimson Pro', 'Georgia', serif\", \n    h1: { size: 48, weight: 800, lineHeight: 58 },\n    body: { size: 18, weight: 400, lineHeight: 28 }\n  },\n  spacing: 8,\n  radius: 0,                // Sharp edges for woodcut style\n  shadow: \"none\"            // No shadows for a flatter woodcut look\n};\n\n// Create a page layout with the provided content\nfunction createPage(title: string, description: string, content: string, image?: string): string {\n  return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${title} - Rabble Community</title>\n  <meta name=\"description\" content=\"${description}\">\n  ${image ? `<meta property=\"og:image\" content=\"${image}\">` : ''}\n  <meta property=\"og:title\" content=\"${title}\">\n  <meta property=\"og:description\" content=\"${description}\">\n  <meta property=\"og:type\" content=\"website\">\n  <meta property=\"og:site_name\" content=\"Rabble Community\">\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n  <link href=\"https://fonts.googleapis.com/css2?family=Alegreya:wght@400;500;700;800&family=Crimson+Pro:wght@400;600;700&display=swap\" rel=\"stylesheet\">\n  <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\" rel=\"stylesheet\">\n  <style>\n    :root {\n      --primary: ${DESIGN_TOKENS.colors.primary};\n      --secondary: ${DESIGN_TOKENS.colors.secondary};\n      --accent: ${DESIGN_TOKENS.colors.accent};\n      --highlight: ${DESIGN_TOKENS.colors.highlight};\n      --surface: ${DESIGN_TOKENS.colors.surface};\n      --surface-alt: ${DESIGN_TOKENS.colors.surfaceAlt};\n      --text-primary: ${DESIGN_TOKENS.colors.textPrimary};\n      --text-secondary: ${DESIGN_TOKENS.colors.textSecondary};\n      --font-family: ${DESIGN_TOKENS.typography.fontFamily};\n      --spacing: ${DESIGN_TOKENS.spacing}px;\n      --radius: ${DESIGN_TOKENS.radius}px;\n      --shadow: ${DESIGN_TOKENS.shadow};\n    }\n    \n    * {\n      box-sizing: border-box;\n      margin: 0;\n      padding: 0;\n    }\n    \n    body {\n      font-family: var(--font-family);\n      color: var(--text-primary);\n      line-height: 1.6;\n      background-color: var(--surface);\n      background-image: url(\"data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%235e452a' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E\");\n    }\n    \n    .header {\n      background-color: var(--surface);\n      color: var(--text-primary);\n      padding: 1.25rem 0;\n      border-bottom: 2px solid var(--primary);\n      position: sticky;\n      top: 0;\n      z-index: 100;\n    }\n    \n    .container {\n      max-width: 1200px;\n      margin: 0 auto;\n      padding: 0 2rem;\n    }\n    \n    .hero-container {\n      max-width: 1000px;\n      margin: 0 auto;\n      padding: 0 2rem;\n      text-align: center;\n    }\n    \n    .nav {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    \n    .logo {\n      font-size: 1.75rem;\n      font-weight: 800;\n      color: var(--primary);\n      text-decoration: none;\n      display: flex;\n      align-items: center;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n    }\n    \n    .logo::before {\n      content: \"\u270A\";\n      display: inline-block;\n      font-size: 1.75rem;\n      margin-right: 0.75rem;\n    }\n    \n    .nav-links {\n      display: flex;\n      list-style: none;\n    }\n    \n    .nav-links li {\n      margin-left: 2rem;\n    }\n    \n    .nav-links a {\n      color: var(--primary);\n      text-decoration: none;\n      font-weight: 600;\n      font-size: 1.125rem;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      padding-bottom: 3px;\n      border-bottom: 2px solid transparent;\n      transition: border-color 0.2s;\n    }\n    \n    .nav-links a:hover {\n      border-bottom: 2px solid var(--primary);\n    }\n    \n    .button-primary {\n      display: inline-block;\n      background-color: var(--primary);\n      color: white;\n      text-decoration: none;\n      padding: 0.75rem 1.5rem;\n      border: 2px solid var(--primary);\n      font-weight: 700;\n      font-size: 1.125rem;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      transition: background-color 0.2s;\n    }\n    \n    .button-primary:hover {\n      background-color: transparent;\n      color: var(--primary);\n    }\n    \n    .button-secondary {\n      display: inline-block;\n      background-color: transparent;\n      color: var(--primary);\n      text-decoration: none;\n      padding: 0.75rem 1.5rem;\n      border: 2px solid var(--primary);\n      font-weight: 700;\n      font-size: 1.125rem;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      transition: background-color 0.2s;\n    }\n    \n    .button-secondary:hover {\n      background-color: var(--primary);\n      color: white;\n    }\n    \n    .hero {\n      background-color: var(--primary);\n      color: white;\n      padding: 5rem 0;\n      text-align: center;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    }\n    \n    .hero h1 {\n      font-size: 3.5rem;\n      margin-bottom: 1.5rem;\n      line-height: 1.2;\n      font-weight: 800;\n      text-transform: uppercase;\n      letter-spacing: 1px;\n      text-shadow: 2px 2px 0 rgba(0,0,0,0.2);\n    }\n    \n    .hero p {\n      font-size: 1.5rem;\n      margin-bottom: 2.5rem;\n      max-width: 700px;\n      margin-left: auto;\n      margin-right: auto;\n      line-height: 1.5;\n    }\n    \n    .hero-buttons {\n      display: flex;\n      justify-content: center;\n      gap: 1rem;\n      flex-wrap: wrap;\n    }\n    \n    /* Special styling for buttons in hero section */\n    .hero .button-primary {\n      background-color: white;\n      color: var(--primary);\n      border-color: white;\n    }\n    \n    .hero .button-primary:hover {\n      background-color: transparent;\n      color: white;\n    }\n    \n    .hero .button-secondary {\n      border-color: white;\n      color: white;\n    }\n    \n    .hero .button-secondary:hover {\n      background-color: white;\n      color: var(--primary);\n    }\n    \n    .content {\n      padding: 4rem 0;\n    }\n    \n    .content h2 {\n      font-size: 2.25rem;\n      margin-bottom: 1.5rem;\n      color: var(--primary);\n      font-weight: 800;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      border-bottom: 3px solid var(--primary);\n      display: inline-block;\n      padding-bottom: 0.5rem;\n    }\n    \n    .content p {\n      margin-bottom: 1.75rem;\n      font-size: 1.125rem;\n      line-height: 1.7;\n    }\n    \n    .content ul {\n      margin-bottom: 2rem;\n      padding-left: 1.25rem;\n      list-style-type: none;\n    }\n    \n    .content li {\n      margin-bottom: 0.75rem;\n      font-size: 1.125rem;\n      position: relative;\n      padding-left: 1.5rem;\n    }\n    \n    .content li::before {\n      content: \"\u270A\";\n      position: absolute;\n      left: 0;\n      top: 0;\n    }\n    \n    .footer {\n      background-color: var(--primary);\n      padding: 3rem 0;\n      color: white;\n      text-align: center;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\");\n    }\n    \n    .footer p {\n      margin-bottom: 1rem;\n      font-size: 1rem;\n    }\n    \n    .footer a {\n      color: white;\n      text-decoration: none;\n      border-bottom: 1px solid rgba(255,255,255,0.3);\n      transition: border-color 0.2s;\n    }\n    \n    .footer a:hover {\n      border-bottom: 1px solid rgba(255,255,255,1);\n    }\n    \n    /* Woodcut style decorative elements */\n    .woodcut-divider {\n      height: 20px;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='40' height='12' viewBox='0 0 40 12' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 6 L40 6 M3 3 L3 9 M8 2 L8 10 M13 1 L13 11 M18 2 L18 10 M23 3 L23 9 M28 2 L28 10 M33 1 L33 11 M38 3 L38 9' stroke='%23000' stroke-width='1.5'/%3E%3C/svg%3E\");\n      background-repeat: repeat-x;\n      margin: 2rem 0;\n    }\n    \n    .feature-grid {\n      display: grid;\n      grid-template-columns: repeat(2, 1fr);\n      gap: 2rem;\n      margin: 2rem 0;\n    }\n    \n    .feature-item {\n      padding: 1.5rem;\n      border: 2px solid var(--primary);\n      background-color: var(--surface);\n      display: flex;\n      flex-direction: column;\n    }\n    \n    .feature-item h3 {\n      font-size: 1.5rem;\n      margin-bottom: 1rem;\n      font-weight: 700;\n      border-bottom: 2px solid var(--accent);\n      display: inline-block;\n      padding-bottom: 0.5rem;\n    }\n    \n    .feature-item p {\n      margin-bottom: 1.5rem;\n    }\n    \n    .feature-image {\n      margin-top: auto;\n      text-align: center;\n      flex-grow: 1;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    \n    .screenshot {\n      max-width: 100%;\n      height: auto;\n      border: 2px solid var(--primary);\n      box-shadow: 5px 5px 0 rgba(0,0,0,0.2);\n      max-height: 400px;\n    }\n    \n    .feature-highlight {\n      margin: 3rem 0;\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 2rem;\n      align-items: center;\n      padding: 2rem;\n      border: 2px solid var(--primary);\n      background-color: var(--surface);\n    }\n    \n    .feature-highlight-text h3 {\n      font-size: 1.75rem;\n      margin-bottom: 1rem;\n      font-weight: 700;\n      border-bottom: 2px solid var(--accent);\n      display: inline-block;\n      padding-bottom: 0.5rem;\n    }\n    \n    .feature-highlight-image {\n      text-align: center;\n    }\n    \n    .screenshot-large {\n      max-width: 100%;\n      height: auto;\n      border: 2px solid var(--primary);\n      box-shadow: 5px 5px 0 rgba(0,0,0,0.2);\n    }\n    \n    /* Open Source banner */\n    .open-source-banner {\n      margin: 2.5rem 0;\n      padding: 2rem;\n      border: 3px solid var(--primary);\n      background-color: var(--surface);\n      position: relative;\n      box-shadow: 7px 7px 0 rgba(0,0,0,0.1);\n    }\n    \n    .open-source-banner:before {\n      content: \"\";\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      background-image: url(\"data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0L10 10L20 0L10 20Z' fill='%235e452a' fill-opacity='0.03'/%3E%3C/svg%3E\");\n      pointer-events: none;\n    }\n    \n    .open-source-banner h3 {\n      font-size: 1.75rem;\n      margin-bottom: 1rem;\n      font-weight: 800;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      display: inline-block;\n      border-bottom: 3px solid var(--primary);\n      padding-bottom: 0.5rem;\n    }\n    \n    .github-button {\n      display: inline-flex;\n      align-items: center;\n      gap: 0.75rem;\n      margin-top: 1rem;\n      padding: 0.75rem 1.5rem;\n      font-size: 1.125rem;\n    }\n    \n    .github-button i {\n      font-size: 1.5rem;\n    }\n    \n    /* Manifesto quote */\n    .manifesto {\n      font-size: 1.5rem;\n      font-style: italic;\n      font-weight: 500;\n      line-height: 1.5;\n      margin: 2rem 0;\n      padding: 1.5rem 2rem;\n      border-left: 5px solid var(--accent);\n      background-color: var(--surface);\n      position: relative;\n    }\n    \n    .manifesto:before {\n      content: \"\"\";\n      position: absolute;\n      top: -0.5rem;\n      left: 1rem;\n      font-size: 5rem;\n      font-family: Georgia, serif;\n      color: var(--accent);\n      opacity: 0.3;\n      line-height: 1;\n    }\n    \n    @media (max-width: 768px) {\n      .feature-grid {\n        grid-template-columns: 1fr;\n      }\n      \n      .feature-highlight {\n        grid-template-columns: 1fr;\n      }\n      \n      .feature-highlight-text {\n        order: 1;\n      }\n      \n      .feature-highlight-image {\n        order: 2;\n      }\n    }\n    \n    /* Notification form styles */\n    .notification-form {\n      max-width: 600px;\n      margin: 2rem 0;\n      padding: 2rem;\n      border: 2px solid var(--primary);\n      background-color: var(--surface);\n    }\n    \n    .form-group {\n      margin-bottom: 1.5rem;\n    }\n    \n    .form-group label {\n      display: block;\n      margin-bottom: 0.5rem;\n      font-weight: 600;\n    }\n    \n    .form-group input,\n    .form-group select {\n      width: 100%;\n      padding: 0.75rem;\n      font-family: var(--font-family);\n      font-size: 1rem;\n      border: 2px solid var(--primary);\n      background-color: var(--highlight);\n    }\n    \n    .form-group input:focus,\n    .form-group select:focus {\n      outline: none;\n      border-color: var(--accent);\n      background-color: white;\n    }\n    \n    /* Responsive adjustments */\n    @media (max-width: 768px) {\n      .container, .hero-container {\n        padding: 0 1rem;\n      }\n      \n      .hero h1 {\n        font-size: 2.5rem;\n      }\n      \n      .hero p {\n        font-size: 1.25rem;\n      }\n      \n      .nav-links {\n        display: none;\n      }\n    }\n  </style>\n</head>\n<body>\n  <header class=\"header\">\n    <div class=\"container\">\n      <nav class=\"nav\">\n        <a href=\"/\" class=\"logo\">Rabble</a>\n        <ul class=\"nav-links\">\n          <li><a href=\"/about\">About</a></li>\n          <li><a href=\"/community\">Community</a></li>\n          <li><a href=\"https://app.rabble.community\" target=\"_blank\">Open App</a></li>\n        </ul>\n      </nav>\n    </div>\n  </header>\n  \n  <main>\n    <div class=\"content\">\n      <div class=\"container\">\n        ${content}\n      </div>\n    </div>\n  </main>\n  \n  <footer class=\"footer\">\n    <div class=\"container\">\n      <p>&copy; 2025 rabble.community \u00B7 All rights reserved</p>\n      <p>\n        <a href=\"/terms\">Terms</a> \u00B7 \n        <a href=\"/privacy\">Privacy</a> \u00B7 \n        <a href=\"/contact\">Contact</a>\n      </p>\n    </div>\n  </footer>\n</body>\n</html>`;\n}\n\n// Generate an HTML page for the invalid invite error\nfunction createErrorPage(message: string): string {\n  return createPage(\n    \"Invalid Invite\",\n    \"This invite link is invalid or has expired.\",\n    `<div style=\"text-align: center; padding: 3rem 0;\">\n      <div style=\"background-color: #FFF1F0; color: #CF1124; border-radius: 8px; padding: 1rem; margin-bottom: 2rem;\">\n        <h2 style=\"margin-bottom: 0.5rem;\">Invite Error</h2>\n        <p>${message}</p>\n      </div>\n      <p>Please contact the person who sent you this invite to get a new one.</p>\n      <a href=\"/\" class=\"button-primary\" style=\"margin-top: 1rem;\">Go Home</a>\n    </div>`\n  );\n}\n\n// Main worker\nexport default {\n  async fetch(request: Request, env: Env, ctx: ExecutionContext): Promise<Response> {\n    const url = new URL(request.url);\n    const path = url.pathname;\n    \n    // Handle app-linking static files from hardcoded content\n    if (STATIC_FILES[path]) {\n      return new Response(STATIC_FILES[path].content, {\n        headers: {\n          'Content-Type': STATIC_FILES[path].contentType,\n          'Cache-Control': 'public, max-age=86400',\n        }\n      });\n    }\n    \n    // Handle static asset paths\n    if (path.startsWith('/static/assets/')) {\n      const fileName = path.split('/').pop() || '';\n      \n      // Map for real PNG images in Cloudflare Images\n      // Format: fileName -> Cloudflare Image ID\n      const cloudflareImagesMap: Record<string, string> = {\n        // These are the real PNG files that should be uploaded to Cloudflare Images\n        'asks_offers.png': 'fc67aea6-a6c6-4cb9-8480-5db260218b00',\n        'chat.png': '0de45bbc-c804-4ef1-9a5b-df668a4a1e00',\n        'events.png': 'c14148d3-18eb-44a9-133b-48f883ad3500',\n        'posting_event.png': '2857264c-f538-492a-c0a3-657012ecb000',\n        'posts.png': '510cc54c-cd4a-40b2-bce3-effb502d2000'\n      };\n      \n      // If we have a Cloudflare Image for this file, redirect to it\n      if (cloudflareImagesMap[fileName]) {\n        const accountHash = 'U9c1NKydsjSHWVgWsUp4Yg'; // Your Cloudflare account hash\n        const imageId = cloudflareImagesMap[fileName];\n        const imageVariant = 'public'; // Default variant\n        \n        return Response.redirect(`https://imagedelivery.net/${accountHash}/${imageId}/${imageVariant}`, 302);\n      }\n      \n      // For files that don't have real images, use SVG placeholders\n      // Create stylish SVG placeholders\n      const baseBgColor = '#5d4037'; // Brown base color from the rabble.community palette\n      \n      // Determine appropriate icon and accent color based on image name\n      let icon = '\u25C6';\n      let mainColor = baseBgColor;\n      \n      if (fileName.includes('posts')) {\n        icon = '\uD83D\uDCF1';\n        mainColor = '#7856FF';\n      } else if (fileName.includes('chat')) {\n        icon = '\uD83D\uDCAC';\n        mainColor = '#00A3FF';\n      } else if (fileName.includes('asks') || fileName.includes('offers')) {\n        icon = '\uD83E\uDD1D';\n        mainColor = '#FF9500';\n      } else if (fileName.includes('events')) {\n        icon = '\uD83D\uDCC5';\n        mainColor = '#00C781';\n      } else if (fileName.includes('community')) {\n        icon = '\uD83D\uDC65';\n        mainColor = '#8d6e63';\n      } else if (fileName.includes('user-control')) {\n        icon = '\uD83D\uDEE1\uFE0F';\n        mainColor = '#3e2723';\n      } else if (fileName.includes('privacy')) {\n        icon = '\uD83D\uDD12';\n        mainColor = '#5d4037';\n      } else if (fileName.includes('authentic')) {\n        icon = '\u2728';\n        mainColor = '#8d6e63';\n      } else if (fileName.includes('not-entertainment')) {\n        icon = '\uD83C\uDFAF';\n        mainColor = '#3e2723';\n      } else if (fileName.includes('not-product')) {\n        icon = '\uD83D\uDC64';\n        mainColor = '#5d4037';\n      } else if (fileName.includes('posting')) {\n        icon = '\u270F\uFE0F';\n        mainColor = '#8d6e63';\n      }\n      \n      // Create an aesthetically pleasing SVG that fits the rabble.community design theme\n      const svgPlaceholder = `<svg width=\"300\" height=\"500\" xmlns=\"http://www.w3.org/2000/svg\">\n        <defs>\n          <pattern id=\"pattern-wood\" patternUnits=\"userSpaceOnUse\" width=\"100\" height=\"100\" patternTransform=\"scale(0.5)\">\n            <rect width=\"100%\" height=\"100%\" fill=\"${mainColor}\" opacity=\"0.05\"/>\n            <path d=\"M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3z\" fill=\"${mainColor}\" opacity=\"0.2\"/>\n          </pattern>\n        </defs>\n        \n        <!-- Background with wood-inspired pattern -->\n        <rect width=\"100%\" height=\"100%\" fill=\"url(#pattern-wood)\" />\n        \n        <!-- Header bar -->\n        <rect width=\"100%\" height=\"60\" fill=\"${mainColor}\" />\n        \n        <!-- Main content area with feature title -->\n        <rect x=\"50\" y=\"100\" width=\"200\" height=\"200\" fill=\"${mainColor}\" opacity=\"0.1\" rx=\"8\" ry=\"8\" />\n        \n        <!-- Feature icon -->\n        <text x=\"150\" y=\"180\" font-family=\"Arial\" font-size=\"72\" text-anchor=\"middle\" dominant-baseline=\"middle\">\n          ${icon}\n        </text>\n        \n        <!-- Feature name -->\n        <text x=\"150\" y=\"300\" font-family=\"Arial\" font-size=\"18\" font-weight=\"bold\" fill=\"${mainColor}\" text-anchor=\"middle\">\n          ${fileName.replace(/[-_]/g, ' ').replace('.png', '').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}\n        </text>\n        \n        <!-- Woodcut-style decorative elements -->\n        <path d=\"M20 350 L280 350\" stroke=\"${mainColor}\" stroke-width=\"2\" />\n        <path d=\"M50 370 L250 370\" stroke=\"${mainColor}\" stroke-width=\"1.5\" />\n        \n        <!-- Footer with app name -->\n        <text x=\"150\" y=\"450\" font-family=\"Arial\" font-size=\"14\" fill=\"${mainColor}\" text-anchor=\"middle\">\n          rabble.community\n        </text>\n      </svg>`;\n      \n      return new Response(svgPlaceholder, {\n        headers: {\n          'Content-Type': 'image/svg+xml',\n          'Cache-Control': 'public, max-age=3600' // 1 hour cache for placeholders\n        }\n      });\n    }\n    \n    // API endpoints\n    if (path.startsWith('/api/')) {\n      // Extract API path without the /api/ prefix\n      const apiPath = path.slice(5);\n      \n      // Create a standard invite\n      if (apiPath === 'invite' && request.method === 'POST') {\n        try {\n          // Check authorization (simple shared token)\n          const authHeader = request.headers.get('Authorization');\n          const token = authHeader?.split(' ')[1];\n          \n          if (token !== env.INVITE_TOKEN) {\n            return new Response(JSON.stringify({ error: 'Unauthorized' }), {\n              status: 401,\n              headers: { 'Content-Type': 'application/json' }\n            });\n          }\n          \n          // Parse request body\n          const body = await request.json() as { \n            groupId: string; \n            relay: string;\n            name?: string;\n            description?: string;\n            avatar?: string;\n            creatorPubkey?: string;\n          };\n          \n          // Validate required fields\n          if (!body.groupId || !body.relay) {\n            return new Response(JSON.stringify({ error: 'Missing required fields' }), {\n              status: 400,\n              headers: { 'Content-Type': 'application/json' }\n            });\n          }\n          \n          // Create invite\n          let result;\n          const hasMetadata = !!(body.name || body.description || body.avatar);\n          \n          if (hasMetadata) {\n            // Create web invite with metadata\n            result = await createWebInvite(env, body.groupId, body.relay, {\n              name: body.name,\n              description: body.description,\n              avatar: body.avatar,\n              creatorPubkey: body.creatorPubkey\n            });\n            console.log(`Created web invite: ${result.code}`);\n          } else {\n            // Create standard invite\n            result = await createInvite(env, body.groupId, body.relay);\n            console.log(`Created invite: ${result.code}`);\n          }\n          \n          return new Response(JSON.stringify({\n            code: result.code,\n            url: result.url\n          }), {\n            status: 201,\n            headers: { 'Content-Type': 'application/json' }\n          });\n        } catch (error) {\n          console.error('Error creating invite:', error);\n          return new Response(JSON.stringify({ error: 'Internal server error' }), {\n            status: 500,\n            headers: { 'Content-Type': 'application/json' }\n          });\n        }\n      }\n      \n      // Create a short URL for an existing invite\n      if (apiPath === 'shorturl' && request.method === 'POST') {\n        try {\n          // Check authorization\n          const authHeader = request.headers.get('Authorization');\n          const token = authHeader?.split(' ')[1];\n          \n          if (token !== env.INVITE_TOKEN) {\n            return new Response(JSON.stringify({ error: 'Unauthorized' }), {\n              status: 401,\n              headers: { 'Content-Type': 'application/json' }\n            });\n          }\n          \n          // Parse request body\n          const body = await request.json() as { code: string };\n          \n          // Validate required fields\n          if (!body.code) {\n            return new Response(JSON.stringify({ error: 'Missing invite code' }), {\n              status: 400,\n              headers: { 'Content-Type': 'application/json' }\n            });\n          }\n          \n          // Check if the invite exists\n          const inviteData = await getInvite(env, body.code);\n          if (!inviteData) {\n            return new Response(JSON.stringify({ error: 'Invite not found' }), {\n              status: 404,\n              headers: { 'Content-Type': 'application/json' }\n            });\n          }\n          \n          // Create short URL\n          console.log(`Generating short URL for code: ${body.code}`);\n          const shortResult = await createShortUrlInvite(env, body.code);\n          console.log(`createShortInviteUrl result: ${shortResult.url}`);\n          \n          return new Response(JSON.stringify({\n            shortCode: shortResult.shortCode,\n            url: shortResult.url\n          }), {\n            status: 201,\n            headers: { 'Content-Type': 'application/json' }\n          });\n        } catch (error) {\n          console.error('Error creating short URL:', error);\n          return new Response(JSON.stringify({ error: 'Internal server error' }), {\n            status: 500,\n            headers: { 'Content-Type': 'application/json' }\n          });\n        }\n      }\n      \n      // Default API response\n      return new Response(JSON.stringify({ error: 'Not found' }), {\n        status: 404,\n        headers: { 'Content-Type': 'application/json' }\n      });\n    }\n    \n    // Handle short invite URLs (/j/)\n    if (path.startsWith('/j/')) {\n      try {\n        const shortCode = path.slice(3); // Remove the /j/ prefix\n        console.log(`Resolving short code: ${shortCode}`);\n        \n        if (!shortCode) {\n          return new Response(createErrorPage('Invalid short invite URL'), {\n            headers: { 'Content-Type': 'text/html' }\n          });\n        }\n        \n        // Resolve the short code to the full invite code\n        const fullCode = await resolveShortCode(env, shortCode);\n        console.log(`Short code ${shortCode} resolved to: ${fullCode}`);\n        \n        if (!fullCode) {\n          return new Response(createErrorPage('This short invite link is invalid or has expired.'), {\n            headers: { 'Content-Type': 'text/html' }\n          });\n        }\n        \n        // Redirect to the full invite URL\n        return Response.redirect(`https://rabble.community/i/${fullCode}`, 302);\n      } catch (error) {\n        console.error('Error handling short URL:', error);\n        return new Response(createErrorPage('An error occurred while processing this invite.'), {\n          headers: { 'Content-Type': 'text/html' }\n        });\n      }\n    }\n    \n    // Handle standard invite URLs (/i/)\n    if (path.startsWith('/i/')) {\n      try {\n        const code = path.slice(3); // Remove the /i/ prefix\n        \n        if (!code) {\n          return new Response(createErrorPage('Invalid invite URL'), {\n            headers: { 'Content-Type': 'text/html' }\n          });\n        }\n        \n        // Get invite data from KV\n        const inviteData = await getInvite(env, code);\n        \n        if (!inviteData) {\n          return new Response(createErrorPage('This invite link is invalid or has expired.'), {\n            headers: { 'Content-Type': 'text/html' }\n          });\n        }\n        \n        // Construct deep link URI\n        const deepLink = `plur://join-community?group-id=${inviteData.groupId}&code=${code}&relay=${encodeURIComponent(inviteData.relay)}`;\n        \n        // Redirect to Plur app/fallback\n        return Response.redirect(deepLink, 302);\n      } catch (error) {\n        console.error('Error handling invite:', error);\n        return new Response(createErrorPage('An error occurred while processing this invite.'), {\n          headers: { 'Content-Type': 'text/html' }\n        });\n      }\n    }\n    \n    // Handle web invites (/join/)\n    if (path.startsWith('/join/')) {\n      try {\n        const code = path.slice(6); // Remove the /join/ prefix\n        \n        if (!code) {\n          return new Response(createErrorPage('Invalid web invite URL'), {\n            headers: { 'Content-Type': 'text/html' }\n          });\n        }\n        \n        // Get web invite data from KV\n        const webInviteData = await getWebInvite(env, code);\n        \n        if (!webInviteData) {\n          return new Response(createErrorPage('This web invite link is invalid or has expired.'), {\n            headers: { 'Content-Type': 'text/html' }\n          });\n        }\n        \n        // Generate web invite page HTML\n        const html = createWebInvitePage(webInviteData, code);\n        \n        return new Response(html, {\n          headers: { 'Content-Type': 'text/html' }\n        });\n      } catch (error) {\n        console.error('Error handling web invite:', error);\n        return new Response(createErrorPage('An error occurred while processing this web invite.'), {\n          headers: { 'Content-Type': 'text/html' }\n        });\n      }\n    }\n    \n    // Handle home page and other static content\n    if (path === '/' || path === '/index.html') {\n      // Use the content directly from index.html\n      return new Response(`<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>rabble.community - A Community App Built on Open Protocol</title>\n    <style>\n        :root {\n            --primary-color: #5d4037;\n            --secondary-color: #3e2723;\n            --accent-color: #8d6e63;\n            --text-color: #3e2723;\n            --light-bg: #efebe9;\n            --dark-bg: #3e2723;\n        }\n        \n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        body {\n            font-family: 'Courier New', Courier, monospace;\n            line-height: 1.6;\n            color: var(--text-color);\n            background-color: var(--light-bg);\n            position: relative;\n        }\n        \n        .container {\n            width: 90%;\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 20px;\n        }\n        \n        header {\n            background: var(--secondary-color);\n            color: white;\n            padding: 2rem 0;\n            text-align: center;\n            border-bottom: 5px solid var(--accent-color);\n            position: relative;\n        }\n        \n        header::after {\n            content: \"\";\n            position: absolute;\n            bottom: -15px;\n            left: 0;\n            width: 100%;\n            height: 10px;\n            background: repeating-linear-gradient(\n                90deg,\n                var(--accent-color),\n                var(--accent-color) 15px,\n                transparent 15px,\n                transparent 30px\n            );\n        }\n        \n        .hero {\n            padding: 4rem 0;\n            text-align: center;\n        }\n        \n        .hero h1 {\n            font-size: 3rem;\n            margin-bottom: 1rem;\n            color: var(--primary-color);\n        }\n        \n        .hero p {\n            font-size: 1.2rem;\n            max-width: 800px;\n            margin: 0 auto 2rem;\n        }\n        \n        section {\n            padding: 3rem 0;\n        }\n        \n        h2 {\n            font-size: 2.5rem;\n            margin-bottom: 2rem;\n            color: var(--secondary-color);\n            text-align: center;\n        }\n        \n        h3 {\n            font-size: 1.8rem;\n            margin-bottom: 1.5rem;\n            color: var(--primary-color);\n        }\n        \n        .features {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n            gap: 2rem;\n            margin-top: 2rem;\n        }\n        \n        .feature-card {\n            background-color: rgba(255, 255, 255, 0.85);\n            border: 2px solid var(--secondary-color);\n            border-radius: 0;\n            padding: 2rem;\n            box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.2);\n            transition: transform 0.3s ease;\n            position: relative;\n            overflow: hidden;\n        }\n        \n        .feature-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.2);\n        }\n        \n        .feature-card::after {\n            content: \"\";\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: repeating-linear-gradient(\n                45deg,\n                rgba(93, 64, 55, 0.05),\n                rgba(93, 64, 55, 0.05) 2px,\n                transparent 2px,\n                transparent 8px\n            );\n            pointer-events: none;\n        }\n        \n        .feature-image {\n            max-width: 100%;\n            height: auto;\n            margin-bottom: 1.5rem;\n            border: 1px solid var(--secondary-color);\n        }\n        \n        .feature-card h3 {\n            margin-bottom: 1rem;\n        }\n        \n        .bill-of-rights {\n            background-color: var(--dark-bg);\n            color: white;\n            padding: 3rem 0;\n            position: relative;\n            border-top: 3px solid var(--accent-color);\n            border-bottom: 3px solid var(--accent-color);\n        }\n        \n        .bill-of-rights::before, .bill-of-rights::after {\n            content: \"\";\n            position: absolute;\n            left: 0;\n            width: 100%;\n            height: 15px;\n            background-image: \n                linear-gradient(45deg, var(--accent-color) 25%, transparent 25%),\n                linear-gradient(-45deg, var(--accent-color) 25%, transparent 25%);\n            background-size: 20px 20px;\n        }\n        \n        .bill-of-rights::before {\n            top: -15px;\n        }\n        \n        .bill-of-rights::after {\n            bottom: -15px;\n        }\n        \n        .rights-list {\n            list-style: none;\n            margin-top: 2rem;\n        }\n        \n        .rights-list li {\n            margin-bottom: 1.5rem;\n            padding-left: 1.5rem;\n            position: relative;\n        }\n        \n        .rights-list li:before {\n            content: \"\u2605\";\n            position: absolute;\n            left: 0;\n            color: var(--accent-color);\n            font-size: 1.2em;\n        }\n        \n        .mission-section {\n            background-color: var(--light-bg);\n            text-align: center;\n            padding: 4rem 0;\n        }\n        \n        .mission-statement {\n            font-size: 1.5rem;\n            max-width: 800px;\n            margin: 0 auto;\n            font-style: italic;\n        }\n        \n        .cta {\n            background: var(--secondary-color);\n            color: white;\n            text-align: center;\n            padding: 4rem 0;\n            border-top: 5px solid var(--accent-color);\n            position: relative;\n        }\n        \n        .cta::before {\n            content: \"\";\n            position: absolute;\n            top: -15px;\n            left: 0;\n            width: 100%;\n            height: 10px;\n            background: repeating-linear-gradient(\n                90deg,\n                var(--accent-color),\n                var(--accent-color) 15px,\n                transparent 15px,\n                transparent 30px\n            );\n        }\n        \n        .cta h2 {\n            color: white;\n        }\n        \n        .btn {\n            display: inline-block;\n            background-color: var(--accent-color);\n            color: white;\n            padding: 0.8rem 2rem;\n            border: 2px solid white;\n            text-decoration: none;\n            font-weight: bold;\n            margin-top: 1.5rem;\n            transition: all 0.3s ease;\n            position: relative;\n            box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.2);\n        }\n        \n        .btn:hover {\n            background-color: white;\n            color: var(--secondary-color);\n            transform: translateY(-3px);\n            box-shadow: 5px 5px 0 rgba(0, 0, 0, 0.2);\n        }\n        \n        footer {\n            background-color: var(--dark-bg);\n            color: white;\n            text-align: center;\n            padding: 2rem 0;\n        }\n        \n        @media (max-width: 768px) {\n            .hero h1 {\n                font-size: 2.5rem;\n            }\n            \n            h2 {\n                font-size: 2rem;\n            }\n            \n            .features {\n                grid-template-columns: 1fr;\n            }\n            \n            .feature-card {\n                margin-bottom: 2rem;\n            }\n            \n            header::after, .cta::before, .bill-of-rights::before, .bill-of-rights::after {\n                background-size: 15px 15px;\n            }\n        }\n    </style>\n</head>\n<body>\n    <header>\n        <div class=\"container\">\n            <h1>rabble.community</h1>\n            <p>Signal for Facebook Groups</p>\n            <a href=\"https://app.rabble.community\" style=\"display: inline-block; margin-top: 15px; background-color: white; color: var(--secondary-color); padding: 8px 20px; text-decoration: none; font-weight: bold; border: none;\">Launch Rabble App</a>\n        </div>\n    </header>\n    \n    <section class=\"hero\">\n        <div class=\"container\">\n            <h1>Authentic Communities Built on Care and Connection</h1>\n            <p>rabble.community is a communities app being built on the open Nostr protocol, putting users in control of their online social experience.</p>\n            <div style=\"margin-top: 30px;\">\n                <a href=\"https://app.rabble.community\" style=\"display: inline-block; background-color: var(--accent-color); color: white; padding: 12px 25px; font-size: 1.2rem; text-decoration: none; font-weight: bold; border: 2px solid var(--accent-color);\">Try Rabble Now</a>\n                <p style=\"margin-top: 10px; font-size: 0.9rem;\">Web app available now. iOS and Android apps coming soon.</p>\n            </div>\n        </div>\n    </section>\n    \n    <section class=\"mission-section\">\n        <div class=\"container\">\n            <h2>Our Mission</h2>\n            <p class=\"mission-statement\">Our mission is to enable authentic, online communities built on care, connection, and sustainable relationships.</p>\n        </div>\n    </section>\n    \n    <section>\n        <div class=\"container\">\n            <h2>Why Plur?</h2>\n            <p>We believe in a future where communities everywhere are empowered to organize and create positive social change. Following the successful launch of Nos and Planetary apps on the Nostr protocol, we're now focusing on the needs of communities and groups looking for alternatives to Facebook Groups, WhatsApp, and Slack.</p>\n            \n            <div class=\"features\">\n                <div class=\"feature-card\">\n                    <img src=\"static/assets/community-focused.png\" alt=\"Community-Focused\" class=\"feature-image\">\n                    <h3>Community-Focused</h3>\n                    <p>rabble.community is a social app, not a social media app. We focus on active engagement with other people versus passive consumption of content.</p>\n                </div>\n                \n                <div class=\"feature-card\">\n                    <img src=\"static/assets/user-control.png\" alt=\"User Control\" class=\"feature-image\">\n                    <h3>User Control</h3>\n                    <p>You own your followers and can interact with them in any app on the protocol. You decide what content you see and from whom.</p>\n                </div>\n                \n                <div class=\"feature-card\">\n                    <img src=\"static/assets/privacy-first.png\" alt=\"Privacy First\" class=\"feature-image\">\n                    <h3>Privacy First</h3>\n                    <p>Think Signal-like privacy for community groups. Your social online experiences should leave you feeling fulfilled and positive.</p>\n                </div>\n            </div>\n        </div>\n    </section>\n    \n    <section class=\"bill-of-rights\">\n        <div class=\"container\">\n            <h2>A Bill of Rights for Social Media</h2>\n            <ul class=\"rights-list\">\n                <li><strong>The right to privacy and security</strong> - End-to-end encryption and granular privacy settings</li>\n                <li><strong>The right to own and control your identity</strong> - Decentralized identity ownership, handles, and profile portability</li>\n                <li><strong>The right to choose and understand algorithms</strong> - Algorithm control panel, multiple feed views</li>\n                <li><strong>The right to community self-governance</strong> - Community-led governance, fair and transparent moderation tools</li>\n                <li><strong>The right to full portability</strong> - Permissionless and open protocol, export options, interoperability</li>\n            </ul>\n        </div>\n    </section>\n    \n    <section>\n        <div class=\"container\">\n            <h2>Our Approach</h2>\n            <p>We use an open, decentralized protocol - Nostr - to put users in control of their online social experience, feed, and personal communities. We're eliminating the ad-driven model\u2014which is predicated on likes and engagement\u2014and instead put users in control of what they see, and from whom.</p>\n            \n            <div class=\"features\">\n                <div class=\"feature-card\">\n                    <img src=\"static/assets/not-entertainment.png\" alt=\"Not Entertainment\" class=\"feature-image\">\n                    <h3>Not a Source of Entertainment</h3>\n                    <p>There are many other options for entertainment. We are focused on being 'pro social' and fostering authentic community.</p>\n                </div>\n                \n                <div class=\"feature-card\">\n                    <img src=\"static/assets/not-product.png\" alt=\"Not the Product\" class=\"feature-image\">\n                    <h3>You Are Not the Product</h3>\n                    <p>The flow of communications is decentralized and not controlled by a corporation. Our business model is designed to put your interests first.</p>\n                </div>\n                \n                <div class=\"feature-card\">\n                    <img src=\"static/assets/authentic-connections.png\" alt=\"Authentic Connections\" class=\"feature-image\">\n                    <h3>Authentic Connections</h3>\n                    <p>rabble.community leaves behind the negative impacts of social media (loneliness, toxic content, FOMO) and instead offers the benefits of positive connections.</p>\n                </div>\n            </div>\n        </div>\n    </section>\n    \n    <section class=\"cta\">\n        <div class=\"container\">\n            <h2>Join Us in Building a Better Social Experience</h2>\n            <p>rabble.community is available now! We're working to create a platform where communities, not corporations, hold the power over online communication.</p>\n            <a href=\"https://app.rabble.community\" class=\"btn\">Use Rabble Now</a>\n            <p style=\"margin-top: 20px; font-size: 1.1rem;\">Access the web app at <a href=\"https://app.rabble.community\" style=\"color: white; text-decoration: underline;\">app.rabble.community</a> \u2014 iOS and Android apps coming soon!</p>\n        </div>\n    </section>\n    \n    <footer>\n        <div class=\"container\">\n            <p>&copy; 2025 rabble.community. All rights reserved.</p>\n            <p>Built on the open Nostr protocol.</p>\n        </div>\n    </footer>\n</body>\n</html>`, {\n        headers: { 'Content-Type': 'text/html' }\n      });\n    }\n    \n    // Handle blog and other static content paths\n    if (path.startsWith('/blog/') || path === '/blog') {\n      // This would typically load from KV or another source\n      // For demo purposes, returning a simple message\n      return new Response(createPage(\n        \"Blog\",\n        \"Latest news and updates from the Rabble team\",\n        `<h1>Rabble Blog</h1>\n        <p>This is where blog posts would be displayed...</p>`\n      ), {\n        headers: { 'Content-Type': 'text/html' }\n      });\n    }\n    \n    // Handle \"About\" page\n    if (path === '/about') {\n      return new Response(createPage(\n        \"About Rabble\",\n        \"Learn about our mission and team\",\n        `<h1>About Rabble</h1>\n        <p>Rabble is a privacy-first communication platform...</p>`\n      ), {\n        headers: { 'Content-Type': 'text/html' }\n      });\n    }\n    \n    // Fallback - return 404\n    return new Response(createPage(\n      \"Page Not Found\",\n      \"The requested page could not be found\",\n      `<div style=\"text-align: center; padding: 3rem 0;\">\n        <h1>404 - Page Not Found</h1>\n        <p>The page you're looking for doesn't exist or has been moved.</p>\n        <a href=\"/\" class=\"button-primary\" style=\"margin-top: 1rem;\">Go Home</a>\n      </div>`\n    ), {\n      status: 404,\n      headers: { 'Content-Type': 'text/html' }\n    });\n  }\n};", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/Users/rabble/code/verse/invite_gateway/src/index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/Users/rabble/code/verse/invite_gateway/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/Users/rabble/code/verse/invite_gateway/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/Users/rabble/code/verse/invite_gateway/src/index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/Users/rabble/code/verse/invite_gateway/.wrangler/tmp/bundle-alrEtx/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/Users/rabble/code/verse/invite_gateway/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/Users/rabble/code/verse/invite_gateway/.wrangler/tmp/bundle-alrEtx/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/Users/rabble/code/verse/invite_gateway/.wrangler/tmp/bundle-alrEtx/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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AA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UA8e5B,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBjB;AA7hBS;AAgiBT,SAAS,gBAAgB,SAAyB;AAChD,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA,aAGS,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAKlB;AACF;AAbS;AAgBT,IAAO,cAAQ;AAAA,EACb,MAAM,MAAM,SAAkB,KAAU,KAA0C;AAChF,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAC/B,UAAM,OAAO,IAAI;AAGjB,QAAI,aAAa,IAAI,GAAG;AACtB,aAAO,IAAI,SAAS,aAAa,IAAI,EAAE,SAAS;AAAA,QAC9C,SAAS;AAAA,UACP,gBAAgB,aAAa,IAAI,EAAE;AAAA,UACnC,iBAAiB;AAAA,QACnB;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,KAAK,WAAW,iBAAiB,GAAG;AACtC,YAAM,WAAW,KAAK,MAAM,GAAG,EAAE,IAAI,KAAK;AAI1C,YAAM,sBAA8C;AAAA;AAAA,QAElD,mBAAmB;AAAA,QACnB,YAAY;AAAA,QACZ,cAAc;AAAA,QACd,qBAAqB;AAAA,QACrB,aAAa;AAAA,MACf;AAGA,UAAI,oBAAoB,QAAQ,GAAG;AACjC,cAAM,cAAc;AACpB,cAAM,UAAU,oBAAoB,QAAQ;AAC5C,cAAM,eAAe;AAErB,eAAO,SAAS,SAAS,6BAA6B,WAAW,IAAI,OAAO,IAAI,YAAY,IAAI,GAAG;AAAA,MACrG;AAIA,YAAM,cAAc;AAGpB,UAAI,OAAO;AACX,UAAI,YAAY;AAEhB,UAAI,SAAS,SAAS,OAAO,GAAG;AAC9B,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,MAAM,GAAG;AACpC,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,MAAM,KAAK,SAAS,SAAS,QAAQ,GAAG;AACnE,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,QAAQ,GAAG;AACtC,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,WAAW,GAAG;AACzC,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,cAAc,GAAG;AAC5C,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,SAAS,GAAG;AACvC,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,WAAW,GAAG;AACzC,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,mBAAmB,GAAG;AACjD,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,aAAa,GAAG;AAC3C,eAAO;AACP,oBAAY;AAAA,MACd,WAAW,SAAS,SAAS,SAAS,GAAG;AACvC,eAAO;AACP,oBAAY;AAAA,MACd;AAGA,YAAM,iBAAiB;AAAA;AAAA;AAAA,qDAGwB,SAAS;AAAA,+RACiO,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAQzP,SAAS;AAAA;AAAA;AAAA,8DAGM,SAAS;AAAA;AAAA;AAAA;AAAA,YAI3D,IAAI;AAAA;AAAA;AAAA;AAAA,4FAI4E,SAAS;AAAA,YACzF,SAAS,QAAQ,SAAS,GAAG,EAAE,QAAQ,QAAQ,EAAE,EAAE,MAAM,GAAG,EAAE,IAAI,UAAQ,KAAK,OAAO,CAAC,EAAE,YAAY,IAAI,KAAK,MAAM,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC;AAAA;AAAA;AAAA;AAAA,6CAIhG,SAAS;AAAA,6CACT,SAAS;AAAA;AAAA;AAAA,yEAGmB,SAAS;AAAA;AAAA;AAAA;AAK5E,aAAO,IAAI,SAAS,gBAAgB;AAAA,QAClC,SAAS;AAAA,UACP,gBAAgB;AAAA,UAChB,iBAAiB;AAAA;AAAA,QACnB;AAAA,MACF,CAAC;AAAA,IACH;AAGA,QAAI,KAAK,WAAW,OAAO,GAAG;AAE5B,YAAM,UAAU,KAAK,MAAM,CAAC;AAG5B,UAAI,YAAY,YAAY,QAAQ,WAAW,QAAQ;AACrD,YAAI;AAEF,gBAAM,aAAa,QAAQ,QAAQ,IAAI,eAAe;AACtD,gBAAM,QAAQ,YAAY,MAAM,GAAG,EAAE,CAAC;AAEtC,cAAI,UAAU,IAAI,cAAc;AAC9B,mBAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,eAAe,CAAC,GAAG;AAAA,cAC7D,QAAQ;AAAA,cACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,YAChD,CAAC;AAAA,UACH;AAGA,gBAAM,OAAO,MAAM,QAAQ,KAAK;AAUhC,cAAI,CAAC,KAAK,WAAW,CAAC,KAAK,OAAO;AAChC,mBAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,0BAA0B,CAAC,GAAG;AAAA,cACxE,QAAQ;AAAA,cACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,YAChD,CAAC;AAAA,UACH;AAGA,cAAI;AACJ,gBAAM,cAAc,CAAC,EAAE,KAAK,QAAQ,KAAK,eAAe,KAAK;AAE7D,cAAI,aAAa;AAEf,qBAAS,MAAM,gBAAgB,KAAK,KAAK,SAAS,KAAK,OAAO;AAAA,cAC5D,MAAM,KAAK;AAAA,cACX,aAAa,KAAK;AAAA,cAClB,QAAQ,KAAK;AAAA,cACb,eAAe,KAAK;AAAA,YACtB,CAAC;AACD,oBAAQ,IAAI,uBAAuB,OAAO,IAAI,EAAE;AAAA,UAClD,OAAO;AAEL,qBAAS,MAAM,aAAa,KAAK,KAAK,SAAS,KAAK,KAAK;AACzD,oBAAQ,IAAI,mBAAmB,OAAO,IAAI,EAAE;AAAA,UAC9C;AAEA,iBAAO,IAAI,SAAS,KAAK,UAAU;AAAA,YACjC,MAAM,OAAO;AAAA,YACb,KAAK,OAAO;AAAA,UACd,CAAC,GAAG;AAAA,YACF,QAAQ;AAAA,YACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,UAChD,CAAC;AAAA,QACH,SAAS,OAAO;AACd,kBAAQ,MAAM,0BAA0B,KAAK;AAC7C,iBAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,wBAAwB,CAAC,GAAG;AAAA,YACtE,QAAQ;AAAA,YACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,UAChD,CAAC;AAAA,QACH;AAAA,MACF;AAGA,UAAI,YAAY,cAAc,QAAQ,WAAW,QAAQ;AACvD,YAAI;AAEF,gBAAM,aAAa,QAAQ,QAAQ,IAAI,eAAe;AACtD,gBAAM,QAAQ,YAAY,MAAM,GAAG,EAAE,CAAC;AAEtC,cAAI,UAAU,IAAI,cAAc;AAC9B,mBAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,eAAe,CAAC,GAAG;AAAA,cAC7D,QAAQ;AAAA,cACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,YAChD,CAAC;AAAA,UACH;AAGA,gBAAM,OAAO,MAAM,QAAQ,KAAK;AAGhC,cAAI,CAAC,KAAK,MAAM;AACd,mBAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,sBAAsB,CAAC,GAAG;AAAA,cACpE,QAAQ;AAAA,cACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,YAChD,CAAC;AAAA,UACH;AAGA,gBAAM,aAAa,MAAM,UAAU,KAAK,KAAK,IAAI;AACjD,cAAI,CAAC,YAAY;AACf,mBAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,mBAAmB,CAAC,GAAG;AAAA,cACjE,QAAQ;AAAA,cACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,YAChD,CAAC;AAAA,UACH;AAGA,kBAAQ,IAAI,kCAAkC,KAAK,IAAI,EAAE;AACzD,gBAAM,cAAc,MAAM,qBAAqB,KAAK,KAAK,IAAI;AAC7D,kBAAQ,IAAI,gCAAgC,YAAY,GAAG,EAAE;AAE7D,iBAAO,IAAI,SAAS,KAAK,UAAU;AAAA,YACjC,WAAW,YAAY;AAAA,YACvB,KAAK,YAAY;AAAA,UACnB,CAAC,GAAG;AAAA,YACF,QAAQ;AAAA,YACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,UAChD,CAAC;AAAA,QACH,SAAS,OAAO;AACd,kBAAQ,MAAM,6BAA6B,KAAK;AAChD,iBAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,wBAAwB,CAAC,GAAG;AAAA,YACtE,QAAQ;AAAA,YACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,UAChD,CAAC;AAAA,QACH;AAAA,MACF;AAGA,aAAO,IAAI,SAAS,KAAK,UAAU,EAAE,OAAO,YAAY,CAAC,GAAG;AAAA,QAC1D,QAAQ;AAAA,QACR,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,MAChD,CAAC;AAAA,IACH;AAGA,QAAI,KAAK,WAAW,KAAK,GAAG;AAC1B,UAAI;AACF,cAAM,YAAY,KAAK,MAAM,CAAC;AAC9B,gBAAQ,IAAI,yBAAyB,SAAS,EAAE;AAEhD,YAAI,CAAC,WAAW;AACd,iBAAO,IAAI,SAAS,gBAAgB,0BAA0B,GAAG;AAAA,YAC/D,SAAS,EAAE,gBAAgB,YAAY;AAAA,UACzC,CAAC;AAAA,QACH;AAGA,cAAM,WAAW,MAAM,iBAAiB,KAAK,SAAS;AACtD,gBAAQ,IAAI,cAAc,SAAS,iBAAiB,QAAQ,EAAE;AAE9D,YAAI,CAAC,UAAU;AACb,iBAAO,IAAI,SAAS,gBAAgB,mDAAmD,GAAG;AAAA,YACxF,SAAS,EAAE,gBAAgB,YAAY;AAAA,UACzC,CAAC;AAAA,QACH;AAGA,eAAO,SAAS,SAAS,8BAA8B,QAAQ,IAAI,GAAG;AAAA,MACxE,SAAS,OAAO;AACd,gBAAQ,MAAM,6BAA6B,KAAK;AAChD,eAAO,IAAI,SAAS,gBAAgB,iDAAiD,GAAG;AAAA,UACtF,SAAS,EAAE,gBAAgB,YAAY;AAAA,QACzC,CAAC;AAAA,MACH;AAAA,IACF;AAGA,QAAI,KAAK,WAAW,KAAK,GAAG;AAC1B,UAAI;AACF,cAAM,OAAO,KAAK,MAAM,CAAC;AAEzB,YAAI,CAAC,MAAM;AACT,iBAAO,IAAI,SAAS,gBAAgB,oBAAoB,GAAG;AAAA,YACzD,SAAS,EAAE,gBAAgB,YAAY;AAAA,UACzC,CAAC;AAAA,QACH;AAGA,cAAM,aAAa,MAAM,UAAU,KAAK,IAAI;AAE5C,YAAI,CAAC,YAAY;AACf,iBAAO,IAAI,SAAS,gBAAgB,6CAA6C,GAAG;AAAA,YAClF,SAAS,EAAE,gBAAgB,YAAY;AAAA,UACzC,CAAC;AAAA,QACH;AAGA,cAAM,WAAW,kCAAkC,WAAW,OAAO,SAAS,IAAI,UAAU,mBAAmB,WAAW,KAAK,CAAC;AAGhI,eAAO,SAAS,SAAS,UAAU,GAAG;AAAA,MACxC,SAAS,OAAO;AACd,gBAAQ,MAAM,0BAA0B,KAAK;AAC7C,eAAO,IAAI,SAAS,gBAAgB,iDAAiD,GAAG;AAAA,UACtF,SAAS,EAAE,gBAAgB,YAAY;AAAA,QACzC,CAAC;AAAA,MACH;AAAA,IACF;AAGA,QAAI,KAAK,WAAW,QAAQ,GAAG;AAC7B,UAAI;AACF,cAAM,OAAO,KAAK,MAAM,CAAC;AAEzB,YAAI,CAAC,MAAM;AACT,iBAAO,IAAI,SAAS,gBAAgB,wBAAwB,GAAG;AAAA,YAC7D,SAAS,EAAE,gBAAgB,YAAY;AAAA,UACzC,CAAC;AAAA,QACH;AAGA,cAAM,gBAAgB,MAAM,aAAa,KAAK,IAAI;AAElD,YAAI,CAAC,eAAe;AAClB,iBAAO,IAAI,SAAS,gBAAgB,iDAAiD,GAAG;AAAA,YACtF,SAAS,EAAE,gBAAgB,YAAY;AAAA,UACzC,CAAC;AAAA,QACH;AAGA,cAAM,OAAO,oBAAoB,eAAe,IAAI;AAEpD,eAAO,IAAI,SAAS,MAAM;AAAA,UACxB,SAAS,EAAE,gBAAgB,YAAY;AAAA,QACzC,CAAC;AAAA,MACH,SAAS,OAAO;AACd,gBAAQ,MAAM,8BAA8B,KAAK;AACjD,eAAO,IAAI,SAAS,gBAAgB,qDAAqD,GAAG;AAAA,UAC1F,SAAS,EAAE,gBAAgB,YAAY;AAAA,QACzC,CAAC;AAAA,MACH;AAAA,IACF;AAGA,QAAI,SAAS,OAAO,SAAS,eAAe;AAE1C,aAAO,IAAI,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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",
  "names": []
}
